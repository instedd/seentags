<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>seentags</title>
    <script type="text/javascript" src="javascripts/jquery-1.3.2.js"></script>
    <script>
    function new_report() {
      var val = $.trim( $('#report').val() );
      if (val.length == 0) return false;
    
      $('#reports').append('<li><span class="original">' + val + '</span> => <span class="understood"></span> <a href="javascript: void(0)" onclick="delete_report(this);">delete</a></li>');
      
      refresh();
        
      $('#report').val('')
      
      return false;
    }
    
    function delete_report(obj) {
      $(obj).parent().remove();
    
      refresh();
    }
    
    function refresh() {
      var str = '';
      $.each($('#reports .original'), function() { 
        str += $(this).text() + "\n";
      });
      
      $.get("/reports", 
          {reports: str},
          function(data) {
            data = eval(data);
          
            understood = $('#reports .understood');
            for(var i = 0; i < data.length; i++) {
              $(understood[i]).text(data[i]);
            }
          }
        );
    }
    </script>
  </head>
  <body>
    <form onsubmit="return new_report()">
    Send new report: <input type="text" name="report" id="report" size="80"/> <input type="submit" value="Send" />
    </form>
    
    <ul id="reports">
    </ul>
  </body>
</html>